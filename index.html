<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏÜåÏ†ïÏóêÍ≤å Î≥¥ÎÇ¥Îäî ÏÇ¨Îûë Ìé∏ÏßÄ üíï</title>
    <link href="https://fonts.googleapis.com/css2?family=Cute+Font&family=Gamja+Flower:wght@400&family=Poor+Story:wght@400&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="https://i.imgur.com/BebsMfr.png.png">
    <style>
/* -------------------------
   Variables globales (f√°cil ajuste)
   ------------------------- */
:root{
  --pink-100: #FFE4E8;
  --pink-200: #FFF0F3;
  --pink-300: #FFEBF0;
  --accent-1: #FF1493;
  --accent-2: #FF69B4;
  --accent-3: #FFB6C1;
  --accent-4: #FFD3DC;
  --envelope-w: clamp(220px, 28vw, 320px);
  --envelope-h: calc(var(--envelope-w) * 0.64);
  --transition-fast: 260ms;
  --transition-medium: 420ms;
  --shadow-1: 0 6px 20px rgba(255, 180, 190, 0.22);
}

/* -------------------------
   Reset / base
   ------------------------- */
*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
}

body {
  font-family: 'Poor Story', cursive;
  background: linear-gradient(135deg, var(--pink-100) 0%, var(--pink-200) 50%, var(--pink-300) 100%);
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Preferencias de movimiento reducidas */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; }
}

/* -------------------------
   Floating hearts & stars
   ------------------------- */
.floating-elements{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

.floating-heart,
.floating-star {
  position: absolute;
  opacity: 0.28;
  animation: float 6s ease-in-out infinite;
  will-change: transform, opacity;
  pointer-events: none;
  transform-origin: center;
}

/* permitir personalizar delay por --delay */
.floating-heart { font-size: 1.2rem; color: var(--accent-2); --delay: 0s; animation-delay: var(--delay); }
.floating-star  { font-size: 1rem;  color: #FFD700;     --delay: 0s; animation-delay: var(--delay); }

@keyframes float {
  0%,100% { transform: translateY(0px) rotate(0deg); }
  25%     { transform: translateY(-20px) rotate(5deg); }
  50%     { transform: translateY(-10px) rotate(-5deg); }
  75%     { transform: translateY(-25px) rotate(3deg); }
}

/* -------------------------
   Contenedor principal
   ------------------------- */
.container{
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  padding:15px;
  position:relative;
  z-index:10;
}

/* -------------------------
   Envelope (sobre)
   ------------------------- */
.envelope{
  position:relative;
  width: var(--envelope-w);
  height: var(--envelope-h);
  cursor: pointer;
  transition: transform 300ms ease, filter 300ms ease;
  transform-style: preserve-3d;
  -webkit-tap-highlight-color: transparent;
}

.envelope:hover{
  transform: translateY(-3px) scale(1.02);
  filter: drop-shadow(0 8px 15px rgba(255, 180, 190, 0.22));
}

/* back & front */
.envelope-back,
.envelope-front{
  position:absolute;
  inset:0;
  border-radius:8px;
  border: 2px solid var(--accent-3);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  box-shadow: var(--shadow-1);
}

/* fondo posterior ligeramente distinto */
.envelope-back{
  background: linear-gradient(135deg, #FFF3F5 0%, #FFE6EB 100%);
  border-color: #FFCAD4;
  z-index:1;
}

/* frente con origen en top center para rotar en X */
.envelope-front{
  background: linear-gradient(135deg, #FFE6EB 0%, var(--accent-4) 100%);
  border-color: #FFB8C6;
  transform-origin: top center;
  transition: transform 800ms cubic-bezier(0.4,0,0.2,1);
  z-index:2;
  will-change: transform;
}

/* triangular flap invertido y m√°s oscuro */
.envelope-front::before {
  content: '';
  position: absolute;
  top: -2px;
  left: 50%;
  transform: translateX(-50%);
  pointer-events: none;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  will-change: transform, opacity;


  width: calc(var(--envelope-w, 280px) * 0.975);
  height: calc(var(--envelope-h, 180px) * 0.65); /* m√°s alto que 0.5 */

  /* punta hacia abajo */
  clip-path: polygon(0% 0%, 100% 0%, 50% 100%);

  /* color m√°s oscuro que el frente */
  background: linear-gradient(135deg, #F8B7C9 0%, #E6738E 100%);

  box-shadow: 0 6px 20px rgba(180, 100, 120, 0.18);
  border-radius: 0 0 6px 6px; /* redondeo en la parte inferior */
  z-index: 3;
  transition: transform 600ms ease, opacity 300ms ease;
}


/* estado abierto (clase .opened en .envelope) */
.envelope.opened .envelope-front{
  /* rotamos en X para abrir la solapa */
  transform: rotateX(-105deg);
  transition: transform 600ms ease-in-out;
}

/* -------------------------
   Heart seal (sello)
   ------------------------- */
/* usamos transform con translateX + scale para conservar centrado siempre */
.heart-seal{
  position:absolute;
  top: calc(50% - 8px); /* centrado vertical aproximado respecto al sobre */
  left:50%;
  transform: translateX(-50%) scale(1);
  width: 70px;
  height: 70px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:2.6rem;
  color: var(--accent-1);
  z-index:3;
  cursor:pointer;
  transition: transform 300ms ease, color 200ms ease, background 200ms ease;
  user-select:none;
  background: radial-gradient(circle, rgba(255,20,147,0.1) 0%, transparent 70%);
  border-radius:50%;
  border: 2px solid rgba(255,20,147,0.2);
  text-shadow: 2px 2px 4px rgba(0,0,0,0.28);
  will-change: transform;
  touch-action: manipulation;
}

/* hover / active (combinaciones seguras) */
.heart-seal:hover,
.heart-seal:focus-visible{
  transform: translateX(-50%) scale(1.1);
  color: var(--accent-2);
  background: radial-gradient(circle, rgba(255,20,147,0.2) 0%, transparent 70%);
  outline: none;
}

.heart-seal:active{
  transform: translateX(-50%) scale(0.94);
}

/* animaciones "crack" (se usan a√±adiendo clases crack-1..3) */
.heart-seal.crack-1 { animation: crack1 300ms ease both; }
.heart-seal.crack-2 { animation: crack2 300ms ease both; }
.heart-seal.crack-3 { animation: crack3 500ms ease forwards; }

@keyframes crack1 {
  0%   { transform: translateX(-50%) scale(1); }
  25%  { transform: translateX(-50%) scale(1.3); filter: brightness(1.5); }
  50%  { transform: translateX(-50%) scale(0.92); filter: brightness(2); }
  100% { transform: translateX(-50%) scale(1.08); }
}

@keyframes crack2 {
  0%   { transform: translateX(-50%) scale(1.1); }
  25%  { transform: translateX(-50%) scale(1.4); filter: brightness(2); }
  50%  { transform: translateX(-50%) scale(0.82); filter: brightness(3); }
  100% { transform: translateX(-50%) scale(1.18); }
}

@keyframes crack3 {
  0%   { transform: translateX(-50%) scale(1.2); opacity: 1; }
  25%  { transform: translateX(-50%) scale(1.6); filter: brightness(4); }
  50%  { transform: translateX(-50%) scale(0.5); }
  100% { transform: translateX(-50%) scale(0); opacity: 0; }
}

/* -------------------------
   Letter / Paper (modal)
   ------------------------- */
.letter-paper{
  position: fixed;
  top: 50%;
  left: 50%;
  width: 260px;
  height: auto;
  max-width: 260px;
  max-height: 170px;
  box-sizing: border-box;
  background: linear-gradient(135deg, #FFFBF0 0%, #FFF8DC 100%);
  border: 2px solid var(--accent-3);
  border-radius: 12px;
  padding: 18px;
  transform: translate(-50%, -45%) translateY(10px);
  opacity: 0;
  pointer-events: none;
  transition:
    opacity var(--transition-medium) cubic-bezier(.2,.9,.3,1),
    transform var(--transition-medium) cubic-bezier(.2,.9,.3,1),
    max-width var(--transition-medium) cubic-bezier(.2,.9,.3,1),
    max-height var(--transition-medium) cubic-bezier(.2,.9,.3,1),
    padding 320ms cubic-bezier(.2,.9,.3,1),
    box-shadow 320ms ease,
    border-radius 320ms ease,
    filter 360ms ease;
  will-change: transform, opacity, max-width, max-height;
  z-index: 100;
  box-shadow: 0 14px 40px rgba(0,0,0,0.18);
  overflow: hidden;
  -webkit-overflow-scrolling: touch;
  filter: blur(6px);
}

/* abierto / expandiendo */
.letter-paper.expanding{
  max-width: min(900px, 92vw);
  max-height: min(720px, 86vh);
  width: auto;
  height: auto;
  transform: translate(-50%, -50%) translateY(0);
  opacity: 1;
  pointer-events: auto;
  filter: blur(0);
  border-radius: 12px;
  padding: 26px;
  overflow-y: auto;
  box-shadow: 0 18px 60px rgba(0,0,0,0.22);
}

/* variante fullscreen (mantiene m√°rgenes) */
.letter-paper.fullscreen{
  max-width: calc(100vw - 4vw);
  max-height: calc(100vh - 4vh);
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  padding: 28px;
  border-radius: 10px;
  box-shadow: 0 20px 80px rgba(0,0,0,0.26);
  overflow-y: auto;
  opacity: 1;
  pointer-events: auto;
  filter: blur(0);
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* -------------------------
   Contenido interno de la carta
   ------------------------- */
.letter-content{
  opacity: 0;
  transition: opacity var(--transition-fast) ease;
  transition-delay: 180ms;
  font-family: 'Poor Story', cursive;
  line-height: 1.65;
  color: #4A4A4A;
  font-size: clamp(0.95rem, 1.25vw, 1.05rem);
  width: 100%;
  position: relative;
  box-sizing: border-box;
  overflow: visible;
  padding-right: 6px;
  will-change: opacity;
}

/* mostrar texto cuando el paper est√° expandido o fullscreen */
.letter-paper.expanding .letter-content,
.letter-paper.fullscreen .letter-content{
  opacity: 1;
  transition-delay: 180ms;
}

/* ocultar inmediatamente si NO est√° expandido (sin delay) */
.letter-paper:not(.expanding) .letter-content{
  opacity: 0;
  transition-delay: 0ms;
}

/* t√≠tulos y p√°rrafos */
.letter-content h1{
  font-family: 'Cute Font', cursive;
  font-size: clamp(1.6rem, 2.4vw, 2.2rem);
  color: var(--accent-1);
  text-align:center;
  margin-bottom:18px;
  text-shadow: 2px 2px 6px rgba(255,105,180,0.22);
  line-height:1.15;
}

.letter-content p{
  margin-bottom:14px;
  text-align:justify;
  hyphens:auto;
}

.letter-content .signature{
  text-align:right;
  font-family: 'Cute Font', cursive;
  font-size:1.15rem;
  color: var(--accent-2);
  margin-top:22px;
}

.letter-content .highlight{
  color: var(--accent-1);
  font-weight: bold;
  text-decoration: underline;
  text-decoration-color: var(--accent-3);
  text-decoration-thickness: 2px;
}

/* sutil sombra interior cuando est√° abierto */
.letter-paper.expanding::after,
.letter-paper.fullscreen::after{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03);
}

/* -------------------------
   Close button
   ------------------------- */
.close-button{
  position: fixed;
  bottom: clamp(70px, 10vh, 110px);
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, var(--accent-2), var(--accent-1));
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 25px;
  font-family: 'Poor Story', cursive;
  font-size: 1rem;
  cursor: pointer;
  opacity: 0;
  transition: transform 300ms ease, opacity 300ms ease, box-shadow 300ms ease;
  box-shadow: 0 6px 15px rgba(255,105,180,0.4);
  z-index: 1000;
}

.close-button.visible{ opacity: 1; }

.close-button:hover,
.close-button:focus-visible{
  transform: translateX(-50%) scale(1.05);
  box-shadow: 0 8px 20px rgba(255,105,180,0.6);
  outline: none;
}

/* -------------------------
   Thank you message
   ------------------------- */
.thank-you{
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0);
  background: linear-gradient(135deg, #FFE4E8, #FFF0F3);
  padding: 30px;
  border-radius: 15px;
  border: 3px solid var(--accent-2);
  text-align:center;
  font-family: 'Cute Font', cursive;
  font-size:1.5rem;
  color: var(--accent-1);
  opacity: 0;
  transition: transform 800ms cubic-bezier(0.25,0.46,0.45,0.94), opacity 400ms ease;
  z-index: 1001;
  box-shadow: 0 12px 30px rgba(255,105,180,0.3);
}

.thank-you.visible{
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

.thank-you .heart{
  font-size: 2.5rem;
  color: var(--accent-1);
  margin: 15px 0;
  animation: heartbeat 1.5s ease-in-out infinite;
}

@keyframes heartbeat {
  0%,100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

/* -------------------------
   Instructions & copyright
   ------------------------- */
.instructions{
  position: absolute;
  bottom: 50px;
  left: 50%;
  transform: translateX(-50%);
  text-align:center;
  font-family: 'Poor Story', cursive;
  color: var(--accent-2);
  font-size: 1.1rem;
  opacity: 0.8;
  animation: pulse 2s ease-in-out infinite;
  pointer-events: none;
}

@keyframes pulse {
  0%,100% { opacity: 0.8; }
  50% { opacity: 0.4; }
}

.copyright{
  position: fixed;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.7rem;
  color: var(--accent-2);
  opacity: 0.6;
  text-align:center;
  z-index:40;
  pointer-events:none;
  transition: opacity 260ms ease, transform 260ms ease;
}

/* Si aplicas la clase .body--modal-open en <body> al abrir */
.body--modal-open .copyright{
  opacity: 0.28;
  transform: translateX(-50%) translateY(4px);
}

/* utilidad */
.hidden{ display:none !important; }

/* prevenir selecci√≥n de texto donde no conviene */
.envelope,
.heart-seal,
.instructions{
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

@media (max-width: 600px), (max-height: 600px) {
  .body--modal-open { 
    overflow: hidden;
    touch-action: none; /* Bloquear scroll de fondo */
  }

  .letter-paper.expanding,
  .letter-paper.fullscreen {
    position: fixed;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    max-height: 100vh !important;
    transform: translate(0, 0) !important;
    border-radius: 0 !important;
    padding: max(16px, env(safe-area-inset-top)) max(12px, env(safe-area-inset-right)) max(16px, env(safe-area-inset-bottom)) max(12px, env(safe-area-inset-left));
    box-shadow: none;
    border: 0;
    opacity: 1;
    pointer-events: auto;
    filter: blur(0);
    overflow: hidden; /* Controlar el scroll solo en el interior */
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    touch-action: auto; /* Permitir scroll t√°ctil */
  }

  .letter-paper.expanding .letter-content,
  .letter-paper.fullscreen .letter-content {
    height: calc(100vh - 76px);
    max-height: calc(100vh - 76px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch; /* Mejora scroll en iOS */
    touch-action: pan-y; /* Solo vertical */
    padding-right: max(12px, env(safe-area-inset-right));
    padding-left: max(12px, env(safe-area-inset-left));
  }

    .close-button {
    display: none;               /* por defecto oculto, se mostrar√° cuando se a√±ada .visible */
    position: fixed;
    right: max(12px, env(safe-area-inset-right));
    top: max(10px, env(safe-area-inset-top));
    width: 44px;                 /* tama√±o t√°ctil razonable */
    height: 44px;
    padding: 8px;
    font-size: 1rem;
    border-radius: 999px;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
    box-shadow: 0 8px 18px rgba(0,0,0,0.18);
    z-index: 2000;
    transform: none !important;  /* evitar escalados no deseados */
    transition: transform .12s ease, opacity .18s ease;
    touch-action: manipulation;
  }

  /* Cuando tenga la clase visible se muestra (evitamos display:block por herencia) */
  .close-button.visible {
    display: inline-flex;
    opacity: 1;
  }

  .close-button:hover,
  .close-button:focus-visible {
    transform: scale(1.05);
    box-shadow: 0 8px 20px rgba(255,105,180,0.6);
  }

  .thank-you {
    width: calc(100% - 32px);
    max-width: 360px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    padding: 18px;
    touch-action: manipulation;
  }

  .thank-you.visible {
    transform: translate(-50%, -50%) scale(1);
  }

  .envelope:hover {
    transform: translateY(-2px) scale(1.01);
  }

  .letter-content {
    font-size: clamp(0.9rem, 3.5vw, 1rem);
  }

  .letter-content h1 {
    font-size: clamp(1.4rem, 5vw, 1.8rem);
  }

  .container {
    padding: 20px 15px;
  }

  .instructions {
    font-size: 1rem;
    bottom: 40px;
  }
}

@media (max-width: 360px) {
  .letter-content {
    font-size: 0.85rem;
  }

  .close-button { width: 40px; height: 40px; font-size: .95rem; padding: 6px; }
  }


    </style>
</head>
<body>
    <!-- Floating decorative elements -->
    <div class="floating-elements" id="floatingElements"></div>
    
    <div class="container" id="mainContainer">
        <!-- Envelope -->
        <div class="envelope" id="envelope">
            <div class="envelope-back"></div>
            <div class="envelope-front"></div>
            <div class="heart-seal" id="heartSeal">üíñ</div>
        </div>
        
        <!-- Instructions -->
        <div class="instructions" id="instructions">
            üíï Ìé∏ÏßÄÎ•º Ïó¥Î†§Î©¥ ÌïòÌä∏Î•º 3Î≤à ÌÑ∞ÏπòÌïòÏÑ∏Ïöî üíï
        </div>
    </div>
    
    <!-- Letter paper -->
    <div class="letter-paper" id="letterPaper">
        <div class="letter-content" id="letterContent">
         <h1>Sojeong üíï</h1>

<p>ÎÇ¥ ÏÇ¨Îûë ÏïàÎÖï. Ïù¥ Ìé∏ÏßÄÎäî 2.1 Î≤ÑÏ†ÑÏù¥Ïïº ‚Äî Îçî ÎÇòÏïÑÏßÄÍ≥† Îã§Îì¨Ïñ¥ÏßÑ Î≤ÑÏ†ÑÏù¥Ïïº. Ï≤´ Î≤àÏß∏ Î≤ÑÏ†ÑÏùò Î∂ÑÏúÑÍ∏∞ÏôÄ ÏßÑÏã¨ÏùÑ Í∑∏ÎåÄÎ°ú Ïú†ÏßÄÌïòÎ©¥ÏÑú Ïù¥Î≤àÏóêÎäî Îçî ÍπäÍ≥† Îçî ÏÇ¨ÎûëÏä§Îü¨Ïö¥ ÎßàÏùåÏúºÎ°ú Ï†ÅÏóàÏñ¥. ÎÇ¥Í∞Ä ÎÑàÎ•º ÏñºÎßàÎÇò ÏÇ¨ÎûëÌïòÎäîÏßÄÎ•º Î≥¥Ïó¨Ï£ºÍ≥† Ïã∂ÏóàÏñ¥. ÎÑàÎäî Ï†ïÎßê ÏÜåÏ§ëÌïòÍ≥† ÌäπÎ≥ÑÌïú ÏÇ¨ÎûåÏù¥Ïïº, Í∑∏Î¶¨Í≥† Ï°∞Í±¥ ÏóÜÎäî ÏÇ¨ÎûëÍ≥º Îî∞ÎúªÌïú ÎèåÎ¥ÑÏùÑ Î∞õÏùÑ ÏûêÍ≤©Ïù¥ ÏûàÏñ¥. Í∑∏ÎûòÏÑú ÎÑ§Í∞Ä ÎÑàÏùò Í∞ÄÏπòÎÇò Î™©Ï†ÅÏùÑ ÏùòÏã¨ÌïòÍ≤å Îê† ÎïåÎßàÎã§ Ïù¥ Ìé∏ÏßÄÎ•º Îã§Ïãú ÏùΩÏñ¥Ï£ºÍ∏∏ Î∞îÎùº. ÎÇò‚Ä¶ ÏÇ¨Ïã§ ÎÑàÎ•º ÎÑàÎ¨¥ ÎßéÏù¥ Î≥¥Í≥† Ïã∂Ïñ¥ ü§≠ ÌïòÏßÄÎßå Í∑∏Í±¥ ÎÇ¥Í∞Ä ÎÑàÎ•º Ïò® ÎßàÏùåÏúºÎ°ú ÏÇ¨ÎûëÌïòÍ∏∞ ÎïåÎ¨∏Ïù¥Ïïº. Í∞ÄÎÅîÏùÄ ÎÇ¥Í∞Ä ÎëêÎ†µÍ±∞ÎÇò, ÌùîÎì§Î¶¨Í±∞ÎÇò, ÏïÑÌååÌïòÍ±∞ÎÇò, Í±±Ï†ïÌïòÎäî Î™®ÏäµÏùÑ Î≥º ÏàòÎèÑ ÏûàÍ≤†ÏßÄÎßå‚Ä¶ ÏûàÏûñÏïÑ? Í∑∏Í±¥ ÎÇ¥Í∞Ä ÎäêÎÅºÎäî Í∞êÏ†ïÏù¥ ÏßÑÏßúÏù¥Í∏∞ ÎïåÎ¨∏Ïù¥Ïïº. Í∑∏Î¶¨Í≥† Ïù¥ Ìé∏ÏßÄÎ•º ÌÜµÌï¥ Íº≠ Í∏∞ÏñµÌï¥ Ï§¨ÏúºÎ©¥ Ìï¥: ÏïÑÎ¨¥Î¶¨ Î©ÄÎ¶¨ Îñ®Ïñ¥Ï†∏ ÏûàÏñ¥ÎèÑ Ïö∞Î¶¨Îäî Ìï≠ÏÉÅ ÏÑúÎ°úÏóêÍ≤å Îã§Í∞ÄÍ∞à Í∏∏ÏùÑ Ï∞æÍ≤å Îê† Í±∞ÎùºÎäî Í±∏.</p>

<p><span class="highlight">ÏÇ¨ÎûëÌï¥ ‚Äî ÏßÑÏã¨ÏúºÎ°ú, ÍπäÏù¥.</span> Ïù¥ ÏÇ¨ÎûëÏùÄ ÏßÄÍ∏àÍπåÏßÄ ÎÇ¥Í∞Ä ÎäêÍª¥Î≥∏ Ïñ¥Îñ§ Í≤ÉÍ≥ºÎèÑ Îã¨Îùº. ÎÑàÎ•º ÏÉùÍ∞ÅÌïòÍ∏∞Îßå Ìï¥ÎèÑ ÎÇòÎèÑ Î™®Î•¥Í≤å ÎØ∏ÏÜåÍ∞Ä ÏßÄÏñ¥Ï†∏. ÎÑ§Í∞Ä Ïó¨Í∏∞ ÎÇ¥ ÏïûÏóê ÏÑú ÏûàÎã§Í≥† ÏÉÅÏÉÅÌïòÎ©¥ Í∞êÎãπÌï† Ïàò ÏóÜÏùÑ ÎßåÌÅº Í∏∞ÏÅ®Ïù¥ Î≤ÖÏ∞®Ïò¨Îùº.</p>

<p>ÎÑ§Í∞Ä ÎÇ¥ ÏïûÏóê ÏÑú ÏûàÎäî Í∑∏ÎÇ†, ÎÇòÎäî Ïû†Ïãú ÎßêÏù¥ ÏóÜÏùÑÏßÄÎèÑ Î™∞Îùº, Í∏∞ÏÅ®Ïùò ÎààÎ¨ºÏù¥ ÌùêÎ•º Í±∞Ïïº. ÎÇòÎäî Îã¨Î†§Í∞ÄÏÑú ÎÑàÎ•º Íº≠ ÏïàÍ≥† ÏÜçÏÇ≠Ïùº Í±∞Ïïº, ‚ÄúÏÇ¨ÎûëÌï¥.‚Äù Í∑∏ ÏàúÍ∞Ñ Ïö∞Î¶¨ ÏÇ¨Ïù¥Ïùò Í±∞Î¶¨Îäî ÏÇ¨ÎùºÏßà Í±∞Ïïº. ÎÇòÎäî ÎÑàÏùò ÎààÏùÑ Îì§Ïó¨Îã§Î≥¥Í≥†, Î∂ÄÎìúÎüΩÍ≤å ÎÑ§ ÏñºÍµ¥ÏùÑ ÎßåÏßÄÎ©∞, ÎÇ¥Í∞Ä Í∞ÄÏßÑ Í∞ÄÏû• ÏàúÏàòÌïú ÏÇ¨ÎûëÏúºÎ°ú ÎÑàÏóêÍ≤å ÏûÖ ÎßûÏ∂ú Í±∞Ïïº.</p>

<p><span class="highlight">ÎÇ¥ Í∞êÏ†ïÏùÄ ÏùºÏãúÏ†ÅÏù¥ÏßÄ ÏïäÏïÑ.</span> Ï†ÑÏóê ÎßêÌñàÎìØÏù¥ ÎÇòÎäî ÎÑàÏôÄ Í≤∞ÌòºÌï¥ÏÑú ÏïÑÏù¥Î•º ÌÇ§Ïö∞Í≥† Ïã∂Ïñ¥. ÎÇòÎäî ÎÑ§ Í∞ÄÏ°±ÏùÑ ÎßåÎÇòÏÑú Îî∞ÎúªÌïòÍ≤å Ïù∏ÏÇ¨ÌïòÍ≥† Ïã∂Í≥†, ÎïåÍ∞Ä ÎêòÎ©¥ ÎÑàÎèÑ ÎÇ¥ Í∞ÄÏ°±ÏùÑ ÎßåÎÇòÍ∏∞Î•º Î∞îÎûò.</p>

<p><span class="highlight">ÎÑàÎäî Ï†ïÎßê ÎÇ¥ ÏÇ∂Ïùò Ï∂ïÎ≥µÏù¥Ïïº.</span> ÎÑàÎäî Ïï†Ïì∞ÏßÄ ÏïäÏïÑ ‚Äî Í∑∏Ï†Ä Ï°¥Ïû¨ÌïòÎäî Í≤ÉÎßåÏúºÎ°ú ‚Äî ÎÇòÎ•º Îçî ÎÇòÏùÄ ÏÇ¨ÎûåÏúºÎ°ú ÎßåÎì§Ïñ¥Ï§ò. ÎÑàÎäî ÎÇòÏùò Í∞ÄÏû• ÏÜåÏ§ëÌïú ÏÑ†Î¨º, ÎÇ¥ Î≥¥Î¨º, ÎÇ¥ Íøà, ÎÇ¥ Ïö∞ÏÑ†ÏàúÏúÑÏïº. ÏßÑÏ†ïÌïú ÏÇ¨ÎûëÏùò ÏïÑÎ¶ÑÎã§ÏõÄÏùÑ Î≥¥Ïó¨Ï§òÏÑú Í≥†ÎßàÏõå.</p>

<p>Ìï≠ÏÉÅ ÎÑàÏóêÍ≤å Í≥ÅÏóê ÏûàÏñ¥Ï£ºÍ≥† Ïã∂ÏóàÎã§Îäî Í±∏ ÏïåÏïÑÏ§ò; ÎÇòÎäî Ïò® ÎßàÏùåÏùÑ Îã§Ìï¥ Í∑∏Í≤ÉÏùÑ ÏùòÎØ∏ÌñàÏñ¥. Î¨¥ÏóáÎ≥¥Îã§ Î®ºÏ†Ä, <span class="highlight">Ïö©ÏÑúÎ•º Íµ¨ÌïòÍ≥† Ïã∂Ïñ¥</span> ‚Äî ÎÑ§Í∞Ä ÎÇ¥Í∞Ä ÎÑàÎ•º Îç∞Î¶¨Îü¨ Í∞ÄÏßÄ Î™ªÌñàÎçò ÏãúÍ∞ÑÎì§, ÎÇ¥Í∞Ä ÏóÜÏñ¥ÏÑú ÎÑ§Í∞Ä Ïô∏Î°úÏõÄÏùÑ ÎäêÍºàÎçò ÏàúÍ∞ÑÎì§Ïóê ÎåÄÌï¥ÏÑú. Ï†ïÎßê ÎØ∏ÏïàÌï¥. Í∑∏ Í≥µÌóàÌïú ÏàúÍ∞ÑÎì§ÏùÑ ÎêòÎèåÎ¶¨Í≥† ÎÇ¥ ÌåîÎ°ú ÎÑàÎ•º Í∞êÏã∏ ÏïàÏïÑÏ£ºÍ≥† Ïã∂Ïñ¥.</p>

<p><span class="highlight">ÏÇ¨ÎûëÌï¥ ‚Äî ÏßÑÏã¨ÏúºÎ°ú, ÍπäÏù¥.</span> Ïù¥ ÏÇ¨ÎûëÏùÄ ÏßÄÍ∏àÍπåÏßÄ ÎÇ¥Í∞Ä ÎäêÍª¥Î≥∏ Ïñ¥Îñ§ Í≤ÉÍ≥ºÎèÑ Îã¨Îùº. ÎÑàÎ•º ÏÉùÍ∞ÅÌïòÍ∏∞Îßå Ìï¥ÎèÑ ÎÇòÎèÑ Î™®Î•¥Í≤å ÎØ∏ÏÜåÍ∞Ä ÏßÄÏñ¥Ï†∏. ÎÑ§Í∞Ä Ïó¨Í∏∞ ÎÇ¥ ÏïûÏóê ÏÑú ÏûàÎã§Í≥† ÏÉÅÏÉÅÌïòÎ©¥ Í∞êÎãπÌï† Ïàò ÏóÜÏùÑ ÎßåÌÅº Í∏∞ÏÅ®Ïù¥ Î≤ÖÏ∞®Ïò¨Îùº.</p>

<p>ÎÑ§Í∞Ä ÎÇ¥ ÏïûÏóê ÏÑú ÏûàÎäî Í∑∏ÎÇ†, ÎÇòÎäî Ïû†Ïãú ÎßêÏù¥ ÏóÜÏùÑÏßÄÎèÑ Î™∞Îùº, Í∏∞ÏÅ®Ïùò ÎààÎ¨ºÏù¥ ÌùêÎ•º Í±∞Ïïº. ÎÇòÎäî Îã¨Î†§Í∞ÄÏÑú ÎÑàÎ•º Íº≠ ÏïàÍ≥† ÏÜçÏÇ≠Ïùº Í±∞Ïïº, ‚ÄúÏÇ¨ÎûëÌï¥.‚Äù Í∑∏ ÏàúÍ∞Ñ Ïö∞Î¶¨ ÏÇ¨Ïù¥Ïùò Í±∞Î¶¨Îäî ÏÇ¨ÎùºÏßà Í±∞Ïïº. ÎÇòÎäî ÎÑàÏùò ÎààÏùÑ Îì§Ïó¨Îã§Î≥¥Í≥†, Î∂ÄÎìúÎüΩÍ≤å ÎÑ§ ÏñºÍµ¥ÏùÑ ÎßåÏßÄÎ©∞, ÎÇ¥Í∞Ä Í∞ÄÏßÑ Í∞ÄÏû• ÏàúÏàòÌïú ÏÇ¨ÎûëÏúºÎ°ú ÎÑàÏóêÍ≤å ÏûÖ ÎßûÏ∂ú Í±∞Ïïº.</p>

<p><span class="highlight">ÎÇ¥ Í∞êÏ†ïÏùÄ ÏùºÏãúÏ†ÅÏù¥ÏßÄ ÏïäÏïÑ.</span> Ï†ÑÏóê ÎßêÌñàÎìØÏù¥ ÎÇòÎäî ÎÑàÏôÄ Í≤∞ÌòºÌï¥ÏÑú ÏïÑÏù¥Î•º ÌÇ§Ïö∞Í≥† Ïã∂Ïñ¥. ÎÇòÎäî ÎÑ§ Í∞ÄÏ°±ÏùÑ ÎßåÎÇòÏÑú Îî∞ÎúªÌïòÍ≤å Ïù∏ÏÇ¨ÌïòÍ≥† Ïã∂Í≥†, ÎïåÍ∞Ä ÎêòÎ©¥ ÎÑàÎèÑ ÎÇ¥ Í∞ÄÏ°±ÏùÑ ÎßåÎÇòÍ∏∞Î•º Î∞îÎûò.</p>

<p><span class="highlight">ÎÑàÎäî Ï†ïÎßê ÎÇ¥ ÏÇ∂Ïùò Ï∂ïÎ≥µÏù¥Ïïº.</span> ÎÑàÎäî Ïï†Ïì∞ÏßÄ ÏïäÏïÑ ‚Äî Í∑∏Ï†Ä Ï°¥Ïû¨ÌïòÎäî Í≤ÉÎßåÏúºÎ°ú ‚Äî ÎÇòÎ•º Îçî ÎÇòÏùÄ ÏÇ¨ÎûåÏúºÎ°ú ÎßåÎì§Ïñ¥Ï§ò. ÎÑàÎäî ÎÇòÏùò Í∞ÄÏû• ÏÜåÏ§ëÌïú ÏÑ†Î¨º, ÎÇ¥ Î≥¥Î¨º, ÎÇ¥ Íøà, ÎÇ¥ Ïö∞ÏÑ†ÏàúÏúÑÏïº. ÏßÑÏ†ïÌïú ÏÇ¨ÎûëÏùò ÏïÑÎ¶ÑÎã§ÏõÄÏùÑ Î≥¥Ïó¨Ï§òÏÑú Í≥†ÎßàÏõå.</p>

<p>Ìï≠ÏÉÅ ÎÑàÏóêÍ≤å Í≥ÅÏóê ÏûàÏñ¥Ï£ºÍ≥† Ïã∂ÏóàÎã§Îäî Í±∏ ÏïåÏïÑÏ§ò; ÎÇòÎäî Ïò® ÎßàÏùåÏùÑ Îã§Ìï¥ Í∑∏Í≤ÉÏùÑ ÏùòÎØ∏ÌñàÏñ¥. Î¨¥ÏóáÎ≥¥Îã§ Î®ºÏ†Ä, <span class="highlight">Ïö©ÏÑúÎ•º Íµ¨ÌïòÍ≥† Ïã∂Ïñ¥</span> ‚Äî ÎÑ§Í∞Ä ÎÇ¥Í∞Ä ÎÑàÎ•º Îç∞Î¶¨Îü¨ Í∞ÄÏßÄ Î™ªÌñàÎçò ÏãúÍ∞ÑÎì§, ÎÇ¥Í∞Ä ÏóÜÏñ¥ÏÑú ÎÑ§Í∞Ä Ïô∏Î°úÏõÄÏùÑ ÎäêÍºàÎçò ÏàúÍ∞ÑÎì§Ïóê ÎåÄÌï¥ÏÑú. Ï†ïÎßê ÎØ∏ÏïàÌï¥. Í∑∏ Í≥µÌóàÌïú ÏàúÍ∞ÑÎì§ÏùÑ ÎêòÎèåÎ¶¨Í≥† ÎÇ¥ ÌåîÎ°ú ÎÑàÎ•º Í∞êÏã∏ ÏïàÏïÑÏ£ºÍ≥† Ïã∂Ïñ¥.</p>

<p>ÎÑà ÎïåÎ¨∏Ïóê ÏßÄÍ∏à ÎÇòÎäî ÎÖ∏Ìä∏Î∂ÅÎèÑ ÏÉùÍ≤ºÍ≥† Îçî Í≥µÎ∂ÄÌï† ÏûêÏú†Î•º ÏñªÏóàÏñ¥. Ï†ïÎßê Í≥†ÎßàÏõå. ÎÑ§Í∞Ä ÎÇ¥Í∞Ä Ï†ïÎßêÎ°ú ÌïÑÏöîÌñàÎçò Í≥ºÏ†ïÏùÑ ÏãúÏûëÌïòÎèÑÎ°ù ÎèÑÏôÄÏ§¨Í≥†, Ïô†ÏßÄ ÏûëÏùÄ Í±∏ÏùåÎì§Ïù¥ Ïö∞Î¶¨ ÎØ∏ÎûòÎ°ú Í∞ÄÎäî Î¨∏ÏùÑ ÌïòÎÇòÏî© Ïó¥Í≥† ÏûàÎäî Í≤É Í∞ôÏïÑ. ÎÇòÎäî Îçî ÎÇòÏùÄ ÎØ∏ÎûòÎ•º ÎßåÎì§Í∏∞ ÏúÑÌï¥ Ïó¥Ïã¨Ìûà ÏùºÌïòÍ≥† ÏûàÏñ¥ ‚Äî ÏïÑÎßà ÎØ∏Íµ≠Ïù¥ÎÇò Ï∫êÎÇòÎã§Ïùò Íµ≠Ï†ú ÌöåÏÇ¨ÏóêÏÑú Îçî ÌÉÑÌÉÑÌïú ÏßÅÏû•ÏùÑ Íµ¨Ìï¥ÏÑú ‚Äî Ïö∞Î¶¨Í∞Ä Îçî ÏûêÏ£º ÎßåÎÇòÍ≥† ÏïàÏ†ïÏ†ÅÏù¥Í≥† ÏÇ¨ÎûëÏúºÎ°ú Í∞ÄÎìùÌïú ÏÇ∂ÏùÑ Ìï®Íªò ÎßåÎì§ Ïàò ÏûàÍ≤å.</p>

<p><span class="highlight">Í∏∞ÏñµÌï¥: ÎÑàÎäî Îçî Ïù¥ÏÉÅ ÌòºÏûêÍ∞Ä ÏïÑÎãàÏïº.</span> ÎÇòÎäî ÎÑàÎ•º ÎèåÎ≥¥Í≥†, ÎÑàÎ•º ÏßÄÏßÄÌïòÎ©∞, ÏÇ¨ÎûëÍ≥º Ï±ÖÏûÑÏúºÎ°ú Ïù¥ Í¥ÄÍ≥ÑÎ•º ÏßÄÌÇ§Í∏∞ ÏúÑÌï¥ Ïã∏Ïö∏ Í±∞Ïïº. ÎÑàÎäî Ìï≠ÏÉÅ Í∞ïÌï¥ÏïºÎßå ÌïòÎäî ÏÇ¨ÎûåÏù¥ ÏïÑÎãàÏïº. ÎÇòÎäî ÎÑàÎ•º ÏÑ∏ÏõåÏ£ºÍ∏∞ ÏúÑÌï¥ Ïó¨Í∏∞ ÏûàÏñ¥ ‚Äî ÌåêÎã®ÌïòÍ±∞ÎÇò ÏÉÅÏ≤ò Ï£ºÍ±∞ÎÇò Î≤ÑÎ¶¨Í∏∞ ÏúÑÌï¥ ÏûàÎäî Í≤å ÏïÑÎãàÏïº. ÎÑàÎäî Ï£ÑÏ±ÖÍ∞ê ÏóÜÎäî ÏÇ¨ÎûëÏùÑ Î∞õÏùÑ ÏûêÍ≤©Ïù¥ ÏûàÏñ¥. ÎÑ§Í∞Ä ÎÇ¥Í≤å Ï§Ä Î™®Îì† Í≤ÉÏóê Í∞êÏÇ¨Ìï¥. ÎÑàÎäî Ï∂©Î∂ÑÌï¥. ÎÑ§Í∞Ä ÏùòÏã¨ÌïòÍ±∞ÎÇò ÎèÑÎßùÍ∞ÄÍ≥† Ïã∂ÏóàÎçò ÏãúÍ∞ÑÎì§ÏùÑ Ïö©ÏÑúÌï¥Ï§ò ‚Äî ÎÇòÎäî Ïù¥Ìï¥Ìï¥. Îã§Î•∏ ÏÇ¨ÎûåÎì§Ïùò ÏùòÍ≤¨Í≥º ÏÉÅÏ≤ò Ï£ºÎäî Ï†ÑÌÜµÏóê ÎßûÏÑúÎäî Í≤ÉÏùÄ ÏâΩÏßÄ ÏïäÏúºÎãàÍπå.</p>

<p>Ïö∞Î¶¨Î•º Í∞àÎùºÎÜìÏúºÎ†§Îäî Î™©ÏÜåÎ¶¨Îì§ÏùÑ Î¨¥ÏãúÌïòÍ≥† Ïö∞Î¶¨ÎßåÏùò Ïù¥ÏïºÍ∏∞Î•º Ïì∞Ïûê. Ïù¥ Í¥ÄÍ≥ÑÎäî Îëê Í∞úÏùò Ïó∞Í≤∞Îêú ÎßàÏùåÏù¥ Î∞ïÏûêÎ•º ÎßûÏ∂îÎäî Í≤É Í∞ôÏïÑ. ÎìúÎ¨ºÍ≥† ÏÜåÏ§ëÌï¥ ‚Äî Ïö∞Î¶¨ Ìï®Íªò ÏßÄÏºúÏ£ºÍ≥†, Ï¶êÍ∏∞Í≥†, ÌÇ§ÏõåÍ∞ÄÏûê.</p>

<p>ÎÑ§Í∞Ä Ïô∏Î°≠Í±∞ÎÇò Í∏∏ÏùÑ ÏûÉÏùÄ ÎäêÎÇåÏù¥ Îì§Í±∞ÎÇò ÎëêÎ†§Ïö∏ ÎïåÎ©¥ Ïù¥ Ìé∏ÏßÄÎ•º ÌéºÏ≥êÏÑú ÎÇòÏôÄ Ìï®Íªò ÎßêÌï¥Ï§ò: <span class="highlight">‚ÄúÎÇòÎäî ÏÇ¨ÎûëÎ∞õÍ≥†, Ï°¥Ï§ëÎ∞õÍ≥†, ÏÜåÏ§ëÌûà Ïó¨Í≤®ÏßÑÎã§. ÎÇòÏóêÍ≤åÎäî ÎÇòÎ•º ÎèåÎ¥êÏ£ºÍ≥† ÎÇ¥ Í∞ÄÏπòÎ•º Î≥¥Ïó¨Ï£ºÎ©∞ Î≥µÏùåÍ≥º ÏùÄÌòúÎ•º Ìï®Íªò ÎÇòÎàÑÎäî ÎÇ®ÏûêÏπúÍµ¨Í∞Ä ÏûàÎã§.‚Äù</span></p>

<p>ÏßÑÏ†ïÌïú ÏÇ¨ÎûëÏùò ÏïÑÎ¶ÑÎã§ÏõÄÏùÑ Î≥¥Ïó¨Ï§òÏÑú Í≥†ÎßàÏõå. Í∑∏ÎûòÏÑú ÎÑàÏóêÍ≤å ÏûäÏùÑ Ïàò ÏóÜÎäî Î¨¥Ïñ∏Í∞ÄÎ•º Ï£ºÍ≥† Ïã∂ÏóàÏñ¥: ÎÇ¥Í∞Ä ÏïÑÎäî ÌîÑÎ°úÍ∑∏ÎûòÎ∞çÏúºÎ°ú Ïù¥ Í∞ÄÏÉÅ Ìé∏ÏßÄÎ•º ÎßåÎì§Ïñ¥ Ï§¨Ïñ¥. Îã®Ïñ¥ÎßåÏù¥ ÏïÑÎãàÎùº ‚Äî ÎÑàÍ∞Ä ÏòÅÏõêÌûà Í∞ÑÏßÅÌï† Ïàò ÏûàÎäî ÎÇ¥ ÎßàÏùåÏùò ÏùºÎ∂ÄÏïº. Ïò§ÎäòÏùÄ ÎÑàÏóêÍ≤å ÌäπÎ≥ÑÌïú Í≤ÉÏùÑ Ï£ºÍ≥† Ïã∂ÏóàÏñ¥ ‚Äî Ïñ∏Ï†úÎì† ÎÇ¥ Í≥ÅÏù¥ ÎäêÍª¥ÏßÄÍ≥† Ïã∂ÏùÑ Îïå Ïó¥Ïñ¥Î≥º Ïàò ÏûàÎäî Ïû•ÏÜå; Îß§Ïùº ÎÑàÏùò ÎßàÏùåÏóê Í∞ÑÏßÅÌï† Ïàò ÏûàÎäî Î∂ÄÎìúÎü¨Ïö¥ Í∏∞Ïñµ.</p>

<p>Ïó¨ÌñâÌï† Ï§ÄÎπÑÍ∞Ä ÎêòÏóàÏùÑ Îïå, ÎÇ¥Í∞Ä Ïπ¥Ïπ¥Ïò§ÌÜ°ÏúºÎ°ú Î≥¥ÎÇ∏ ÏòÅÏÉÅÎì§Í≥º Ï†ïÎ≥¥Îì§ÏùÑ ÏïàÏ†ÑÌïòÍ≤å Î≥¥Í¥ÄÌï¥ ÎëêÍ≥† ÌïÑÏöîÌï† Îïå Ï∞æÏùÑ Ïàò ÏûàÍ≤å Ìï¥. Ïò¨ ÎïåÎäî ÏÇ¨ÏßÑÏùÑ ÎßàÏùåÍªè Ï∞çÏñ¥ ‚Äî ÎÑ§ Í∞ÄÏ°±Í≥º Ï£ºÏúÑ ÏÇ¨ÎûåÎì§ÏóêÍ≤å Î≥¥Ïó¨Ï§ò. Ïö∞Î¶¨Í∞Ä Î®º Í±∞Î¶¨Í∞Ä ÌôòÏÉÅÏù¥ ÏïÑÎãàÎùº ÏßÑÏßú ÏïÑÎ¶ÑÎã§Ïö¥ Î¨¥Ïñ∏Í∞ÄÎ°ú Í∞ÄÎäî Í∏∏Ïù¥ÏóàÎã§Îäî Í±∏ Î≥¥Ïó¨Ï£ºÏûê: Ïö∞Î¶¨Ïùò ÏÇ¨ÎûëÏùÄ ÏñïÏßÄ ÏïäÍ≥† ÏàúÏàòÌïòÎ©∞ ÍπäÏñ¥.</p>

<p><span class="highlight">ÎÑ§Í∞Ä Ïò¨ Îïå ÎÇòÎäî Ìïú Í±∏ÏùåÏî© ÏïàÎÇ¥Ìï†Í≤å.</span> ÎÇ¥ ÏúÑÏπò: ÏΩîÏä§ÌÉÄÎ¶¨Ïπ¥, Ïπ¥Î•¥ÌÉÄÍ≥†, Ïπ¥Î•¥ÌÉÄÍ≥†, ÏºÄÎ∏åÎùºÎîîÏïº(Quebradilla).</p>

<p>ÌÅ∞ Îã§Î¶¨ Îëê Í∞úÏôÄ ÌååÏÑ∏Ïò§ Î©îÌä∏Î°úÌè¥Î¶¨(Paseo Metr√≥poli)ÎùºÎäî ÏáºÌïëÎ™∞ÏùÑ Î≥¥Î©¥ Í∞ÄÍπåÏõåÏßÑ Í±∞Ïïº. Ïä§ÌÉÄÎ≤ÖÏä§, Îß•ÎèÑÎÇ†Îìú, ÌÉÄÏΩîÎ≤®, ÌîºÏûêÌóõÍ≥º ÏÉÅÏ†êÎì§, ÏïΩÍµ≠Îì§, Ìé∏ÏùòÏ†êÏù¥ Ï§ÑÏßÄÏñ¥ ÏûàÎäî Í∏∏ÏùÑ ÏßÄÎÇòÍ≤å Îê† Í±∞Ïïº. Ï£ºÏú†ÏÜåÏóêÏÑú Î∞©Ìñ•ÏùÑ ÌãÄÏñ¥ ÏãúÍ≥®Í∏∏ÏùÑ Í±¥ÎÑàÎ©¥ ÎÇ¥Í∞Ä Í∏∞Îã§Î¶¨Í≥† ÏûàÏùÑ ÌÅ∞ ÏáºÌïëÎ™∞Í≥º ÏäàÌçºÎßàÏºìÏùÑ Ï∞æÍ≤å Îê† Í±∞Ïïº.</p>

<p>Ï§ÄÎπÑÎêòÎ©¥ Ïπ¥Ïπ¥Ïò§ÌÜ°ÏúºÎ°ú GPS ÏúÑÏπòÎ•º Î≥¥ÎÇºÍ≤å, ÏÇ¨ÏßÑÍ≥º ÏòÅÏÉÅÏúºÎ°ú Í∏∏ ÏïàÎÇ¥Ìï¥ Ï§Ñ ÌÖåÎãà Ï†àÎåÄ Í∏∏ÏùÑ ÏûÉÏßÄ ÏïäÏùÑ Í±∞Ïïº. Ìï®Íªò ÎèÑÏãúÎèÑ, ÎÇ¥ ÏßëÎèÑ, ÎÇ¥ Î¨∏ÌôîÎèÑ, ÎÇ¥Í∞Ä Ï¢ãÏïÑÌïòÎäî ÏùåÏãùÎì§ÎèÑ ÌÉêÌóòÌïòÏûê.</p>

<p>ÎÇ¥Í∞Ä ÎÑàÏóêÍ≤å Î≥µÏùåÏùÑ Ï†ÑÌñàÎçò ÎÇ†ÏùÑ Í∏∞ÏñµÌïòÎãà? Í∑∏ ÏàúÍ∞ÑÏùÄ ÎÇ¥Í∞Ä Í∞ÑÏßÅÌïú Í∞ÄÏû• ÌäπÎ≥ÑÌïú Í∏∞Ïñµ Ï§ë ÌïòÎÇòÏïº. ÎÑàÏôÄ Ìï®Íªò ÌïòÎÇòÎãò Ïù¥ÏïºÍ∏∞Î•º ÎÇòÎàÑÎäî Í≤ÉÏù¥ Í±∞Î£©ÌïòÍ≤å ÎäêÍª¥Ï°åÍ≥†, Ìï®Íªò Ìù¨ÎßùÍ≥º Ïò®Í∏∞Î•º ÎÇòÎàà Í≤å ÏÜåÏ§ëÌñàÏñ¥. Í∑∏ ÎÇ†ÏùÑ Í∏∞ÏñµÌï¥Ï£ºÍ∏∏ Î∞îÎûò, ÎÇòÎäî Í∑∏ ÎÇ†Ïù¥ ÎÑ§Í≤å Îäò Î≥ÄÌï®ÏóÜÎäî ÎπõÏù¥ ÎêòÍ∏∏ ÏõêÌï¥ ‚Äî Ïö∞Î¶¨Î•º Ìñ•Ìïú ÌïòÎÇòÎãòÏùò ÏÑ†ÌïòÏã¨ÏùÑ ÏÉÅÍ∏∞ÏãúÌÇ§Îäî Îπõ.</p>

<p>ÌïòÎÇòÎãòÏùÄ Ïö∞Î¶¨Î•º ÏûêÏã†Ïùò ÌòïÏÉÅÏúºÎ°ú Ï∞ΩÏ°∞ÌïòÏãúÍ≥† ÎÜÄÎùºÏö¥ Î™©Ï†ÅÏùÑ Ï£ºÏÖ®Ïñ¥: Í∑∏Î∂ÑÏùò ÏûêÎÖÄÍ∞Ä ÎêòÏñ¥ Ï∞ΩÏ°∞Î•º ÎèåÎ≥¥Îäî ÎèôÎ∞òÏûêÍ∞Ä ÎêòÎäî Í≤É. Ï≤òÏùåÎ∂ÄÌÑ∞ ÌïòÎÇòÎãòÏùÄ ÏÉùÎ™ÖÍ≥º Í∏∞ÏÅ®ÏùÑ ÏúÑÌïú ÏÑ∏ÏÉÅÏóê Ïö∞Î¶¨Î•º ÎëêÏÖ®Ïñ¥. ÏÇ¨ÎûëÏúºÎ°ú Î™®Îì† Í≤ÉÏùÑ Ï£ºÏÖ®Í≥†, Í∑∏Î∂ÑÏùò Í∏∏ÏùÄ ÏÑ†ÌïòÏÖî.</p>

<p>Í∑∏ÎüºÏóêÎèÑ Í±∞ÏßìÍ≥º Íπ®Ïñ¥ÏßêÏù¥ ÏÑ∏ÏÉÅÏóê Îì§Ïñ¥ÏôÄ Ïö∞Î¶¨Î•º Î©ÄÏñ¥ÏßÄÍ≤å ÌñàÏñ¥. Í∑∏ Í±∞ÏßìÎì§ÏùÄ Ïö∞Î¶¨Î•º ÏÉÅÏ≤ò ÏûÖÌûàÍ≥† Ïö∞Î¶¨Î•º Ïö∞Î¶¨Í∞Ä ÎßåÎì§Ïñ¥ÏßÑ ÏûêÏú†ÏóêÏÑú Î©ÄÏñ¥ÏßÄÍ≤å ÌñàÏßÄ. ÌïòÏßÄÎßå Í∑∏ÎïåÏ°∞Ï∞® ÌïòÎÇòÎãòÏùÄ Ïö∞Î¶¨Î•º Î≤ÑÎ¶¨ÏßÄ ÏïäÏúºÏÖ®Ïñ¥. Í∞ÄÍπåÏù¥ Î®∏Î¨¥Î•¥ÏãúÎ©∞ Ïö∞Î¶¨Î•º Îã§Ïãú Ïù∏ÎèÑÌïòÏã§ Í∏∏ÏùÑ Ï§ÄÎπÑÌïòÏÖ®ÏßÄ.</p>

<p>Í∑∏ Í∏∏Ïùò ÌïµÏã¨ÏùÄ Í∑∏Î¶¨Ïä§ÎèÑÏùò Íµ¨ÏÜç ÏÇ¨Ïó≠Ïù¥Ïïº. Í∑∏Î∂ÑÏùÑ ÌÜµÌï¥ Ïö∞Î¶¨Îäî ÌïòÎÇòÎãòÏùò Í∞ÄÏ°±ÏúºÎ°ú Îã§Ïãú ÌôòÏòÅÎ∞õÏïÑ. ÏùÄÌòúÎ°ú Ïö∞Î¶¨Îäî Ï£ÑÏ±ÖÏóêÏÑú ÏîªÍ∏∞Í≥† Ïö©ÏÑúÏôÄ Ï°¥ÏóÑÏúºÎ°ú ÌöåÎ≥µÎêòÎ©∞ ÏÉàÎ°úÏö¥ ÏÉùÎ™ÖÏùÑ ÏñªÏñ¥. Ïù¥Í≤ÉÏùÄ Ïö∞Î¶¨Í∞Ä ÏñªÏñ¥ÎÇ¥Îäî Í≤ÉÏù¥ ÏïÑÎãàÎùº ÏÑ†Î¨ºÎ°ú Ï£ºÏñ¥ÏßÄÎäî Í≤É ‚Äî ÏòàÏàòÏùò ÏôÑÏ†ÑÌïú ÏÇ¨ÎûëÍ≥º Ìù¨ÏÉùÏóêÏÑú Ïò§Îäî Í±∞Ïïº.</p>

<p>Í∑∏ ÏßÑÎ¶¨ ‚Äî ÏßÑÏ†ïÌïú Î≥µÏùå ‚Äî Ïù¥ ÎÇ¥ Ìù¨ÎßùÏùÑ ÌöåÎ≥µÏãúÏº∞Í≥† Ïö∞Î¶¨Î•º Î∂ôÏû°Îäî Í≤ÉÏù¥Ïïº: Ï∞ΩÏ°∞ÌïòÏãúÍ≥† ÏÇ¨ÎûëÌïòÏãúÎ©∞ Ï∞æÏúºÏãúÍ≥† ÌöåÎ≥µÌïòÏãúÎäî ÌïòÎÇòÎãò. Í∑∏ ÎïåÎ¨∏Ïóê Ïö∞Î¶¨Îäî ÌôïÏã†ÏùÑ Í∞ÄÏßÄÍ≥† ÎßêÌï† Ïàò ÏûàÏñ¥: Ïö∞Î¶¨Îäî ÏÜåÏ§ëÌïòÍ≥†, Í∑∏Î∂ÑÍ≥º Ìï®Íªò ÏÇ¨Îäî ÏÇ∂ÏúºÎ°ú Î∂ÄÎ¶ÑÎ∞õÏïòÎã§Îäî Í≤ÉÏùÑ.</p>

<p>Ïö∞Î¶¨Ïùò Í≥µÏú†Îêú Ï±ÖÏûÑÏùÄ Î∂ÄÎìúÎüΩÍ≥† ÏïÑÎ¶ÑÎã§Ïõå: Îß§Ïùº ÌïòÎÇòÎãòÍ≥ºÏùò Í¥ÄÍ≥ÑÎ•º ÎèåÎ≥¥Îäî Í≤É. Í∑∏Î∂ÑÏùò ÎßêÏîÄÏùÑ ÌÜµÌï¥ Î∞∞Ïö∞Í≥† Í∏∞ÎèÑÌïòÎ©∞ Ïã†Î¢∞ÌïòÏó¨ ÎØøÏùåÏù¥ Îçî ÍπäÏñ¥ÏßÄÍ≤å ÌïòÎäî Í≤É. Í∏∞ÎèÖÍµêÏù∏Ïùò ÏÇ∂ÏùÄ ÏßêÏùò Î™©Î°ùÏù¥ ÏïÑÎãàÎùº Ïö∞Î¶¨Î•º Î≥ÄÌôîÏãúÌÇ§Í≥† Í∑∏Î∂ÑÏùò ÏÑ†ÌïòÏã¨ÏùÑ ÏÇ∂ÏùÑ ÌÜµÌï¥ Î≥¥Ïó¨Ï£ºÎäî ÏÇ¥ÏïÑ ÏûàÎäî Í¥ÄÍ≥ÑÏïº.</p>

<p>Ìï≠ÏÉÅ Í∏∞ÏñµÌï¥, ÎÑàÎäî ÌïòÎÇòÎãòÏùò Îî∏Ïù¥Ïïº ‚Äî ÎèÖÌäπÌïòÍ≥† Í±∞Î£©Ìï®Í≥º ÏûêÏú†Î°ú Î∂ÄÎ¶ÑÎ∞õÏïòÏúºÎ©∞ Ï°¥ÏóÑÏúºÎ°ú Í¥ÄÏùÑ Ïì¥ Ï°¥Ïû¨Ïïº. Í∑∏ Í∞ÄÏπòÎäî Í≤∞ÏΩî ÎπºÏïóÍ∏∏ Ïàò ÏóÜÏñ¥. ÎÑ§Í∞Ä ÏùòÏã¨Ìï† ÎïåÎ©¥ Ïö∞Î¶¨Í∞Ä Ìï®Íªò ÎÇòÎà¥Îçò Í∑∏ Í∏∞ÏñµÍ≥º ÌïòÎÇòÎãòÏù¥ ÎÑàÎ•º ÏÇ¨ÎûëÌïòÏãúÍ≥† ÏôÑÏ†ÑÌûà ÌöåÎ≥µÌïòÏã†Îã§Îäî ÏßÑÎ¶¨Î°ú ÎèåÏïÑÍ∞Ä.</p>

<p>Ïù¥ Î©îÏãúÏßÄÎäî ÎÇ¥Í∞Ä Í∞ÄÍπåÏù¥ Í∞ÑÏßÅÌïòÎäî ÏßÑÎ¶¨Ïïº ‚Äî ÌûòÎì† ÎÇ†Îì§ÏùÑ Ìï®Íªò Ïù¥Í≤®ÎÇ∏ Î≥µÏùå, Ïö∞Î¶¨Î•º Î¨∂Ïñ¥Ï£ºÍ≥† ÎØ∏ÎûòÏóê ÎåÄÌïú Ìù¨ÎßùÏùÑ Ï£ºÎäî Î©îÏãúÏßÄ.</p>

<p><span class="highlight">ÎÑàÏóê ÎåÄÌïú ÎÇòÏùò ÏÇ¨ÎûëÏùÄ Ïã†Ïã§ÌïòÍ≥†, Î≥ÄÌï®ÏóÜÍ≥†, Ïù∏ÎÇ¥Î°úÏõå.</span> ÎÇòÎäî Ïò§ÎäòÎèÑ, Îòê ÏòÅÏõêÌûà ÎÑ§ Í≥ÅÏóê ÏûàÏùÑÍ≤å.</p>

<p>ÎÑàÎäî ÎèÖÌäπÌïòÍ≥† ÌäπÎ≥ÑÌïòÎ©∞ Î∞õÏïÑÎì§Ïó¨ÏßÑ Ï°¥Ïû¨Ïïº ‚Äî Ï∞ΩÏ°∞Ïùò ÏôïÍ¥Ä, ÌïòÎÇòÎãòÏùò ÌòïÏÉÅÏúºÎ°ú ÏßÄÏùåÎ∞õÏïòÏñ¥. Í∑∏ ÎàÑÍµ¨ÎèÑ Í∑∏Í±∏ ÎπºÏïóÏßÄ Î™ªÌïòÍ≤å Ìï¥.</p>

<p>ÌïòÎÇòÎãòÏùÄ Ïö©ÏÑúÏôÄ ÌöåÎ≥µÍ≥º ÏÉà ÏÉùÎ™ÖÏùÑ Ï£ºÏÖî. Í∑∏ ÏßÑÎ¶¨Î•º ÎØøÍ≥† ÌïÑÏöîÌï† ÎïåÎßàÎã§ Í∑∏Í≤ÉÏúºÎ°ú ÌûòÏùÑ ÏñªÏñ¥.</p>

<p>Ìñ•ÏàòÏóê Ïû†Í∏∞Í±∞ÎÇò ÎëêÎ†§Ïö∏ Îïå Ïù¥ Ìé∏ÏßÄÎ•º Í∞ÄÍπåÏù¥ Îë¨. Í∑∏ Í∏∞Î∂ÑÏù¥ Ïò¨ Îïå ÏùΩÏñ¥ ‚Äî Ïù¥ Ìé∏ÏßÄÍ∞Ä ÎÑàÏùò ÌîºÎÇúÏ≤òÍ∞Ä ÎêòÍ≤å Ìï¥. Ïö∞Î¶¨Í∞Ä ÎßåÎÇòÎäî ÎÇ†Ïù¥ Ïò§Î©¥, ÎÇòÎäî Ïò® ÎßàÏùåÏúºÎ°ú Í∑∏ ÏàúÍ∞ÑÏùÑ Ï∂ïÌïòÌï†Í≤å.</p>

<div class="signature">
  <span class="highlight">ÏÇ¨ÎûëÌï¥, ÎÇ¥ ÏÜåÏ†ï.</span><br>
  Ìï≠ÏÉÅ Í∑∏Î¶¨Í≥† ÏòÅÏõêÌûà.<br><br>
  Ïò§ÏßÅ ÎÑàÏùò,<br>
  Aaron ü©∑
</div>
</div>
</div>


    
    <!-- Close button -->
    <button class="close-button" id="closeButton">Ìé∏ÏßÄ Îã´Í∏∞ üíï</button>
    
    <!-- Thank you message -->
    <div class="thank-you" id="thankYou">
        <div class="heart">üíñ</div>
        <div>Ìé∏ÏßÄÎ•º ÏùΩÏñ¥Ï£ºÏÖîÏÑú Í∞êÏÇ¨Ìï¥Ïöî</div>
        <div style="font-size: 1.2rem; margin-top: 10px;">ÏÜåÏ†ïÎãòÍªò ÏÇ¨ÎûëÏùÑ Ï†ÑÌñàÏäµÎãàÎã§ üíï</div>
    </div>
    
    <!-- Copyright -->
    <div class="copyright">
        ¬© 2025 Aaron E. Obando & Î∞ïÏÜåÏ†ï ‚Äî Made with üíñ for ÏÜåÏ†ï (foryousojeong) ¬∑ v2.1
    </div>

<script>
/* -----------------------
   Helpers & selects
   ----------------------- */
const envelope = document.getElementById('envelope');
const heartSeal = document.getElementById('heartSeal');
const letterPaper = document.getElementById('letterPaper'); // contenedor principal (con .letter-content dentro)
const closeButton = document.getElementById('closeButton');
const thankYou = document.getElementById('thankYou');
const instructions = document.getElementById('instructions');
const mainContainer = document.getElementById('mainContainer');
const floatingElements = document.getElementById('floatingElements');

function getClientXY(e) {
  if (!e) return { x: 0, y: 0 };
  if (e.clientX !== undefined && e.clientY !== undefined) return { x: e.clientX, y: e.clientY };
  if (e.changedTouches && e.changedTouches[0]) return { x: e.changedTouches[0].clientX, y: e.changedTouches[0].clientY };
  if (e.touches && e.touches[0]) return { x: e.touches[0].clientX, y: e.touches[0].clientY };
  return { x: 0, y: 0 };
}

/* -----------------------
   preferencia: contenedor de scroll real (dentro del letterPaper)
   ----------------------- */
const scrollContainer = letterPaper ? letterPaper.querySelector('.letter-content') : null;

/* -----------------------
   Safe helpers to show/hide the close button
   - hideCloseButtonInstant(): guaranteed to hide immediately (used on init & reset)
   - showCloseButton(): anim-friendly show (used only when at bottom)
   ----------------------- */
function hideCloseButtonInstant() {
  if (!closeButton) return;
  closeButton.classList.remove('visible');
  // inline styles to ensure CSS doesn't flash it visible
  closeButton.style.display = 'none';
  closeButton.style.opacity = '0';
  closeButton.style.pointerEvents = 'none';
  closeButton.setAttribute('aria-hidden', 'true');
}

function showCloseButton() {
  if (!closeButton) return;
  // make visible in an atomic, animation-friendly way
  closeButton.style.display = '';
  // force a frame so CSS transitions can run if present
  requestAnimationFrame(() => {
    closeButton.classList.add('visible');
    closeButton.style.opacity = '1';
    closeButton.style.pointerEvents = 'auto';
    closeButton.removeAttribute('aria-hidden');
    updateCloseButtonForViewport();
  });
}

/* Ajustes visuales y funcionales del bot√≥n de cerrar para mobile */
function updateCloseButtonForViewport() {
  if (!closeButton) return;
  const isMobile = window.innerWidth <= 600 || window.innerHeight <= 600;
  if (isMobile) {
    closeButton.classList.add('close-mobile');
    closeButton.style.width = closeButton.style.width || '44px';
    closeButton.style.height = closeButton.style.height || '44px';
    closeButton.style.padding = closeButton.style.padding || '8px';
    closeButton.style.fontSize = closeButton.style.fontSize || '1rem';
    closeButton.style.right = closeButton.style.right || '12px';
    closeButton.style.top = closeButton.style.top || '12px';
    // only alter display for visible state (showCloseButton handles it)
    if (closeButton.classList.contains('visible')) {
      closeButton.style.display = closeButton.style.display || 'inline-flex';
    }
  } else {
    closeButton.classList.remove('close-mobile');
    closeButton.style.width = '';
    closeButton.style.height = '';
    closeButton.style.padding = '';
    closeButton.style.fontSize = '';
    closeButton.style.right = '';
    closeButton.style.top = '';
    // allow stylesheet to control display when not mobile (but keep aria)
    if (!closeButton.classList.contains('visible')) {
      closeButton.style.display = 'none';
    } else {
      closeButton.style.display = '';
    }
  }
}
window.addEventListener('resize', updateCloseButtonForViewport, { passive: true });
window.addEventListener('orientationchange', () => { setTimeout(updateCloseButtonForViewport, 80); }, { passive: true });

/* -----------------------
   Body scroll lock (mobile-safe)
   ----------------------- */
let _bodyTouchHandler = null;
function lockBodyScroll() {
  document.body.classList.add('body--modal-open');
  document.body.style.overflow = 'hidden';
  _bodyTouchHandler = function (evt) {
    const insideContent = evt.target.closest && evt.target.closest('.letter-content');
    if (!insideContent) evt.preventDefault();
  };
  document.addEventListener('touchmove', _bodyTouchHandler, { passive: false });
}
function unlockBodyScroll() {
  document.body.classList.remove('body--modal-open');
  document.body.style.overflow = '';
  if (_bodyTouchHandler) {
    document.removeEventListener('touchmove', _bodyTouchHandler, { passive: false });
    _bodyTouchHandler = null;
  }
}

/* -----------------------
   Floating elements
   ----------------------- */
function createFloatingElements() {
  const hearts = ['üíñ', 'üíï', 'üíó', 'üíò', 'ü©∑'];
  const stars = ['‚≠ê', '‚ú®', 'üåü', 'üí´'];

  const isMobile = window.innerWidth <= 768;
  const elementCount = isMobile ? 8 : 15;
  const starCount = isMobile ? 4 : 8;

  if (!floatingElements) return;
  floatingElements.innerHTML = '';

  for (let i = 0; i < elementCount; i++) {
    const heart = document.createElement('div');
    heart.className = 'floating-heart';
    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
    heart.style.left = Math.random() * 100 + '%';
    heart.style.top = Math.random() * 100 + '%';
    heart.style.setProperty('--delay', (Math.random() * 6) + 's');
    floatingElements.appendChild(heart);

    if (i < starCount) {
      const star = document.createElement('div');
      star.className = 'floating-star';
      star.textContent = stars[Math.floor(Math.random() * stars.length)];
      star.style.left = Math.random() * 100 + '%';
      star.style.top = Math.random() * 100 + '%';
      star.style.setProperty('--delay', (Math.random() * 6 + 2) + 's');
      floatingElements.appendChild(star);
    }
  }
}

/* -----------------------
   Heart logic & open/close
   ----------------------- */
let clickCount = 0;
let isLetterOpen = false;
let isClosing = false;

function createSparkles(x, y) {
  const sparkleCount = window.innerWidth <= 480 ? 4 : 6;
  for (let i = 0; i < sparkleCount; i++) {
    const sparkle = document.createElement('div');
    sparkle.textContent = '‚ú®';
    sparkle.style.position = 'fixed';
    sparkle.style.left = (x - 10 + Math.random() * 20) + 'px';
    sparkle.style.top = (y - 10 + Math.random() * 20) + 'px';
    sparkle.style.fontSize = window.innerWidth <= 480 ? '0.8rem' : '1rem';
    sparkle.style.pointerEvents = 'none';
    sparkle.style.zIndex = '1000';
    sparkle.style.transition = 'all 1s ease-out';
    document.body.appendChild(sparkle);

    setTimeout(() => {
      sparkle.style.transform = 'translateY(-50px) scale(0)';
      sparkle.style.opacity = '0';
    }, 50);

    setTimeout(() => {
      if (document.body.contains(sparkle)) document.body.removeChild(sparkle);
    }, 1000);
  }
}

function handleHeartActivate(evt) {
  if (evt.preventDefault) evt.preventDefault();
  const { x, y } = getClientXY(evt);
  if (isLetterOpen || isClosing) return;

  clickCount++;
  heartSeal.classList.remove('crack-1', 'crack-2', 'crack-3');

  if (clickCount === 1) {
    heartSeal.classList.add('crack-1');
    createSparkles(x, y);
  } else if (clickCount === 2) {
    heartSeal.classList.add('crack-2');
    createSparkles(x, y);
  } else if (clickCount >= 3) {
    heartSeal.classList.add('crack-3');
    setTimeout(() => openLetter(), 500);
  }
}
if (heartSeal) {
  heartSeal.addEventListener('pointerup', handleHeartActivate, { passive: false });
  heartSeal.addEventListener('contextmenu', e => e.preventDefault());
}

function openLetter() {
  isLetterOpen = true;
  if (instructions) instructions.style.display = 'none';
  if (envelope) envelope.classList.add('opened');
  lockBodyScroll();

  if (letterPaper) {
    letterPaper.style.display = 'block';
    setTimeout(() => { letterPaper.classList.add('expanding'); }, 80);
    setTimeout(() => {
      letterPaper.classList.add('fullscreen');
      if (mainContainer) mainContainer.style.display = 'none';
      // ensure hidden at the moment it becomes fullscreen
      hideCloseButtonInstant();
    }, 1100);
  }
}

function closeLetterSequence() {
  if (isClosing) return;
  isClosing = true;
  hideCloseButtonInstant();
  if (letterPaper) letterPaper.classList.remove('fullscreen');

  setTimeout(() => {
    if (letterPaper) letterPaper.classList.remove('expanding');
    setTimeout(() => {
      if (letterPaper) letterPaper.style.display = 'none';
      if (mainContainer) mainContainer.style.display = 'flex';
      if (envelope) envelope.classList.remove('opened');
      if (heartSeal) heartSeal.style.display = 'flex';
      unlockBodyScroll();

      setTimeout(() => {
        if (thankYou) thankYou.classList.add('visible');
        setTimeout(() => {
          if (thankYou) thankYou.classList.remove('visible');
          setTimeout(() => resetLetter(), 1000);
        }, 4000);
      }, 400);
    }, 700);
  }, 500);
}

/* -----------------------
   closeButton listener: only allow close if visible or at bottom
   ----------------------- */
if (closeButton) {
  closeButton.addEventListener('pointerup', function (e) {
    if (e && e.preventDefault) e.preventDefault();

    const isVisible = closeButton.classList.contains('visible');
    const atBottom = scrollContainer ?
        ((scrollContainer.scrollTop + scrollContainer.clientHeight) >= (scrollContainer.scrollHeight - 8))
        : true;

    if (!isVisible && !atBottom) return;
    if (isClosing) return;

    closeLetterSequence();
  }, { passive: false });
}

/* -----------------------
   Reset
   ----------------------- */
function resetLetter() {
  clickCount = 0;
  isLetterOpen = false;
  isClosing = false;
  if (heartSeal) {
    heartSeal.style.display = 'flex';
    heartSeal.classList.remove('crack-1', 'crack-2', 'crack-3');
  }
  if (instructions) instructions.style.display = 'block';
  unlockBodyScroll();
  hideCloseButtonInstant();
}

/* -----------------------
   Particles, breathing, tap logic...
   (sin cambios relevantes ‚Äî se mantienen igual)
   ----------------------- */
function createHeartParticles() {
  const interval = window.innerWidth <= 768 ? 4000 : 2000;
  setInterval(() => {
    if (!isLetterOpen) {
      const particle = document.createElement('div');
      particle.textContent = Math.random() > 0.5 ? 'üíï' : '‚ú®';
      particle.style.position = 'fixed';
      particle.style.left = Math.random() * window.innerWidth + 'px';
      particle.style.top = '-20px';
      particle.style.fontSize = window.innerWidth <= 480 ? '0.7rem' : '0.8rem';
      particle.style.pointerEvents = 'none';
      particle.style.zIndex = '1';
      particle.style.opacity = '0.6';
      particle.style.transition = 'all 8s linear';
      document.body.appendChild(particle);

      setTimeout(() => {
        particle.style.top = window.innerHeight + 20 + 'px';
        particle.style.transform = 'rotate(360deg)';
        particle.style.opacity = '0';
      }, 100);

      setTimeout(() => {
        if (document.body.contains(particle)) document.body.removeChild(particle);
      }, 8000);
    }
  }, interval);
}

function addBreathingAnimation() {
  setInterval(() => {
    if (!isLetterOpen && !isClosing && envelope) {
      envelope.style.transform = 'scale(1.01)';
      setTimeout(() => { envelope.style.transform = 'scale(1)'; }, 1000);
    }
  }, 4000);
}

let tapCount = 0;
let tapTimer = null;
if (envelope) {
  envelope.addEventListener('pointerup', function (e) {
    if (e.target === heartSeal) return;
    tapCount++;
    if (tapTimer) clearTimeout(tapTimer);
    tapTimer = setTimeout(() => {
      if (tapCount === 2 && !isLetterOpen) {
        const { x, y } = getClientXY(e);
        createHeartBurst(x, y);
      }
      tapCount = 0;
    }, 300);
  }, { passive: true });
}

function createHeartBurst(x, y) {
  const hearts = ['üíñ', 'üíï', 'üíó', 'üíò', 'ü©∑', '‚ù§Ô∏è', 'üíù'];
  const burstCount = window.innerWidth <= 480 ? 8 : 12;
  for (let i = 0; i < burstCount; i++) {
    const heart = document.createElement('div');
    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
    heart.style.position = 'fixed';
    heart.style.left = x + 'px';
    heart.style.top = y + 'px';
    heart.style.fontSize = window.innerWidth <= 480 ? '1.2rem' : '1.5rem';
    heart.style.pointerEvents = 'none';
    heart.style.zIndex = '1000';
    heart.style.transition = 'all 2s ease-out';
    document.body.appendChild(heart);

    const angle = (i * (360 / burstCount)) * Math.PI / 180;
    const distance = window.innerWidth <= 480 ? 80 : 120;

    setTimeout(() => {
      heart.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0) rotate(720deg)`;
      heart.style.opacity = '0';
    }, 100);

    setTimeout(() => {
      if (document.body.contains(heart)) document.body.removeChild(heart);
    }, 2000);
  }
}

/* -----------------------
   Auto-scroll safe for touch devices
   ----------------------- */
(function () {
  const paper = letterPaper;
  if (!paper) {
    console.warn('No se encontr√≥ #letterPaper ‚Äî el auto-scroll no se activar√°.');
    return;
  }
  const innerScrollContainer = paper.querySelector('.letter-content') || paper;
  const closeBtn = closeButton;

  let isAutoScrolling = false;
  let autoScrollTimer = null;
  let autoScrollResumeTimer = null;
  const AUTO_SCROLL_RESUME_DELAY = 5000;
  const SCROLL_SPEED = 25;
  const SCROLL_STEP = 1;

  function startAutoScroll() {
    if (isAutoScrolling || window.innerWidth <= 768) return;
    if (!innerScrollContainer) return;

    if (autoScrollTimer) { clearInterval(autoScrollTimer); autoScrollTimer = null; }
    if (autoScrollResumeTimer) { clearTimeout(autoScrollResumeTimer); autoScrollResumeTimer = null; }

    isAutoScrolling = true;
    autoScrollTimer = setInterval(() => {
      if (innerScrollContainer.scrollTop < innerScrollContainer.scrollHeight - innerScrollContainer.clientHeight - 1) {
        innerScrollContainer.scrollTop += SCROLL_STEP;
      } else {
        // reached the bottom -> show close via helper
        if (closeBtn && !closeBtn.classList.contains('visible')) showCloseButton();
        clearInterval(autoScrollTimer);
        autoScrollTimer = null;
        isAutoScrolling = false;
      }
    }, 1000 / SCROLL_SPEED);
  }

  function stopAutoScroll() {
    if (autoScrollTimer) { clearInterval(autoScrollTimer); autoScrollTimer = null; }
    isAutoScrolling = false;
  }

  function scheduleAutoScrollResume() {
    if (autoScrollResumeTimer) clearTimeout(autoScrollResumeTimer);
    autoScrollResumeTimer = setTimeout(() => {
      autoScrollResumeTimer = null;
      if (paper.classList.contains('fullscreen') && !isClosing) startAutoScroll();
    }, AUTO_SCROLL_RESUME_DELAY);
  }

  ['wheel', 'mousedown', 'pointerdown', 'keydown'].forEach(evt => {
    document.addEventListener(evt, () => { stopAutoScroll(); scheduleAutoScrollResume(); }, { passive: true });
  });

  let touchStartY = 0;
  let isUserScrolling = false;

  innerScrollContainer.addEventListener('touchstart', (e) => {
    touchStartY = e.touches && e.touches[0] ? e.touches[0].clientY : 0;
    isUserScrolling = false;
    if (isAutoScrolling) stopAutoScroll();
  }, { passive: true });

  innerScrollContainer.addEventListener('touchmove', (e) => {
    const currentY = e.touches && e.touches[0] ? e.touches[0].clientY : 0;
    const deltaY = Math.abs(currentY - touchStartY);
    if (deltaY > 6) { isUserScrolling = true; stopAutoScroll(); }
  }, { passive: true });

  innerScrollContainer.addEventListener('touchend', () => {
    if (isUserScrolling) scheduleAutoScrollResume();
    else { stopAutoScroll(); scheduleAutoScrollResume(); }
    setTimeout(() => { isUserScrolling = false; }, 300);
  }, { passive: true });

  const BOTTOM_THRESHOLD_PX = 8;
  let rafId = null;
  function checkIfScrolledToEnd() {
    if (rafId) cancelAnimationFrame(rafId);
    rafId = requestAnimationFrame(() => {
      const atBottom = (innerScrollContainer.scrollTop + innerScrollContainer.clientHeight) >= (innerScrollContainer.scrollHeight - BOTTOM_THRESHOLD_PX);
      if (atBottom) {
        if (closeBtn) showCloseButton();
      } else {
        if (closeBtn) hideCloseButtonInstant();
      }
    });
  }

  innerScrollContainer.addEventListener('scroll', () => { checkIfScrolledToEnd(); }, { passive: true });
  window.addEventListener('resize', checkIfScrolledToEnd, { passive: true });
  window.addEventListener('orientationchange', () => { setTimeout(checkIfScrolledToEnd, 60); }, { passive: true });

  window._letterAutoScroll = {
    start: startAutoScroll,
    stop: stopAutoScroll,
    reset: function () {
      stopAutoScroll();
      if (autoScrollResumeTimer) { clearTimeout(autoScrollResumeTimer); autoScrollResumeTimer = null; }
    },
    scheduleResume: scheduleAutoScrollResume
  };

  if (paper.classList.contains('fullscreen')) startAutoScroll();
})();

/* -----------------------
   Observer para detectar fullscreen y arrancar auto-scroll
   ----------------------- */
const mutationTarget = letterPaper;
if (mutationTarget) {
  const fullscreenObserver = new MutationObserver((mutations) => {
    for (const m of mutations) {
      if (m.attributeName === 'class' && mutationTarget.classList.contains('fullscreen')) {
        setTimeout(() => {
          if (window._letterAutoScroll && typeof window._letterAutoScroll.start === 'function') {
            window._letterAutoScroll.start();
          }
          const inner = mutationTarget.querySelector('.letter-content') || mutationTarget;
          if (inner) {
            const atBottom = (inner.scrollTop + inner.clientHeight) >= (inner.scrollHeight - 8);
            if (!atBottom) hideCloseButtonInstant();
            else showCloseButton();
          }
        }, 700);
        break;
      }
    }
  });
  fullscreenObserver.observe(mutationTarget, { attributes: true, attributeFilter: ['class'] });
}

/* -----------------------
   Resize handler
   ----------------------- */
window.addEventListener('resize', function () {
  if (letterPaper && letterPaper.classList.contains('fullscreen')) {
    letterPaper.style.width = '100vw';
    letterPaper.style.height = '100vh';
  }
  clearTimeout(window.resizeTimer);
  window.resizeTimer = setTimeout(() => { createFloatingElements(); }, 500);
}, { passive: true });

/* -----------------------
   Init on DOMContentLoaded
   ----------------------- */
(function initialHide() {
  // hide close button asap ‚Äî runs even before DOMContentLoaded if script is early
  hideCloseButtonInstant();
})();

document.addEventListener('DOMContentLoaded', function () {
  createFloatingElements();
  createHeartParticles();
  addBreathingAnimation();

  // ensure close button hidden initially (double-safety)
  hideCloseButtonInstant();

  setTimeout(() => {
    if (instructions) instructions.style.opacity = '1';
  }, 1000);

  setTimeout(() => {
    const paragraphs = document.querySelectorAll('.letter-content p');
    paragraphs.forEach((p, index) => p.style.setProperty('--index', index));
  }, 100);
});

/* -----------------------
   Prevent context menu on long press globally
   ----------------------- */
document.addEventListener('contextmenu', function (e) {
  e.preventDefault();
});
</script>



</body>
</html>
